{"version":3,"names":["_index","require","_errors","VALID_PART_FIELDS","VALID_PARTS_PER_ROLE","user","function","model","system","VALID_PREVIOUS_CONTENT_ROLES","validateChatHistory","history","prevContent","currContent","role","parts","VertexAIError","VertexAIErrorCode","INVALID_CONTENT","POSSIBLE_ROLES","includes","JSON","stringify","Array","isArray","length","countFields","text","inlineData","functionCall","functionResponse","part","key","validParts","validPreviousContentRoles"],"sourceRoot":"../../../lib","sources":["methods/chat-session-helpers.ts"],"mappings":"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","ignoreList":[]}
