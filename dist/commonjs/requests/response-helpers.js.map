{"version":3,"names":["_index","require","_errors","_logger","createEnhancedContentResponse","response","candidates","hasOwnProperty","index","responseWithHelpers","addHelpers","text","length","logger","warn","hadBadFinishReason","VertexAIError","VertexAIErrorCode","RESPONSE_ERROR","formatBlockErrorMessage","getText","promptFeedback","functionCalls","getFunctionCalls","undefined","textStrings","content","parts","part","push","join","functionCall","badFinishReasons","FinishReason","RECITATION","SAFETY","candidate","finishReason","includes","message","blockReason","blockReasonMessage","firstCandidate","finishMessage"],"sourceRoot":"../../../lib","sources":["requests/response-helpers.ts"],"mappings":"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","ignoreList":[]}
